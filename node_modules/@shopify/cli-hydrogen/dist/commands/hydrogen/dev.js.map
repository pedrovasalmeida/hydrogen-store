{"version":3,"file":"dev.js","sources":["../../../src/cli/services/dev.ts","../../../src/cli/commands/hydrogen/dev.ts"],"sourcesContent":["import {createServer} from 'vite'\nimport {error as kitError} from '@shopify/cli-kit'\n\ninterface DevOptions {\n  directory: string\n  force: boolean\n  host: boolean\n}\n\nasync function dev({directory, force, host}: DevOptions) {\n  const server = await createServer({\n    root: directory,\n    server: {\n      open: true,\n      force,\n      host,\n    },\n  })\n\n  try {\n    await server.listen()\n    server.printUrls()\n    server.config.logger.info('')\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  } catch (error: any) {\n    const abortError = new kitError.Abort(error.message)\n    abortError.stack = error.stack\n    throw abortError\n  }\n}\n\nexport default dev\n","import devService from '../../services/dev'\nimport {hydrogenFlags} from '../../flags'\nimport {path, cli} from '@shopify/cli-kit'\nimport {Command, Flags} from '@oclif/core'\n\nexport default class Dev extends Command {\n  static description = 'Run a Hydrogen storefront locally for development'\n  static flags = {\n    ...cli.globalFlags,\n    path: hydrogenFlags.path,\n    force: Flags.boolean({\n      description: 'force dependency pre-bundling.',\n      env: 'SHOPIFY_FLAG_DEV_FORCE',\n    }),\n    host: Flags.boolean({\n      description: 'listen on all addresses, including LAN and public addresses.',\n      env: 'SHOPIFY_FLAG_DEV_HOST',\n    }),\n  }\n\n  async run(): Promise<void> {\n    const {flags} = await this.parse(Dev)\n    const directory = flags.path ? path.resolve(flags.path) : process.cwd()\n\n    await devService({directory, ...flags})\n  }\n}\n"],"names":["error","kitError","devService"],"mappings":";;;;;AASA,eAAmB,GAAA,CAAA,EAAC,SAAW,EAAA,KAAA,EAAO,IAAmB,EAAA,EAAA;AACvD,EAAM,MAAA,MAAA,GAAS,MAAM,YAAa,CAAA;AAAA,IAChC,IAAM,EAAA,SAAA;AAAA,IACN,MAAQ,EAAA;AAAA,MACN,IAAM,EAAA,IAAA;AAAA,MACN,KAAA;AAAA,MACA,IAAA;AAAA,KACF;AAAA,GACD,CAAA,CAAA;AAED,EAAI,IAAA;AACF,IAAA,MAAM,OAAO,MAAO,EAAA,CAAA;AACpB,IAAA,MAAA,CAAO,SAAU,EAAA,CAAA;AACjB,IAAO,MAAA,CAAA,MAAA,CAAO,MAAO,CAAA,IAAA,CAAK,EAAE,CAAA,CAAA;AAAA,WAErBA,OAAP,EAAA;AACA,IAAA,MAAM,UAAa,GAAA,IAAIC,KAAS,CAAA,KAAA,CAAMD,QAAM,OAAO,CAAA,CAAA;AACnD,IAAA,UAAA,CAAW,QAAQA,OAAM,CAAA,KAAA,CAAA;AACzB,IAAM,MAAA,UAAA,CAAA;AAAA,GACR;AACF;;ACxBA,MAAqB,IAAA,GAArB,cAAiC,OAAQ,CAAA;AAAA,EAevC,MAAM,GAAqB,GAAA;AACzB,IAAA,MAAM,EAAC,KAAA,EAAA,GAAS,MAAM,IAAA,CAAK,MAAM,IAAG,CAAA,CAAA;AACpC,IAAM,MAAA,SAAA,GAAY,MAAM,IAAO,GAAA,IAAA,CAAK,QAAQ,KAAM,CAAA,IAAI,CAAI,GAAA,OAAA,CAAQ,GAAI,EAAA,CAAA;AAEtE,IAAA,MAAME,GAAW,CAAA,EAAC,SAAW,EAAA,GAAG,OAAM,CAAA,CAAA;AAAA,GACxC;AACF,CAAA,CAAA;AArBA,IAAqB,GAArB,GAAA,KAAA;AAAqB,IACZ,WAAc,GAAA,mDAAA,CAAA;AADF,IAEZ,KAAQ,GAAA;AAAA,EACb,GAAG,GAAI,CAAA,WAAA;AAAA,EACP,MAAM,aAAc,CAAA,IAAA;AAAA,EACpB,KAAA,EAAO,MAAM,OAAQ,CAAA;AAAA,IACnB,WAAa,EAAA,gCAAA;AAAA,IACb,GAAK,EAAA,wBAAA;AAAA,GACN,CAAA;AAAA,EACD,IAAA,EAAM,MAAM,OAAQ,CAAA;AAAA,IAClB,WAAa,EAAA,8DAAA;AAAA,IACb,GAAK,EAAA,uBAAA;AAAA,GACN,CAAA;AACH,CAAA;;;;"}